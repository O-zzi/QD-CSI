[u805618386@my-kul-web2051 public_html]$ curl http://127.0.0.1:5000/api/health
{"status":"ok","timestamp":"2025-12-22T07:35:13.807Z","uptime":932.163059001,"database":"disconnected","environment":"production","version":"1.0.0"}[u805618386@my-kul-web2051 public_html]$ ^C
[u805618386@my-kul-web2051 public_html]$ # Stop PM2 (Passenger will take over)
pm2 stop all

# Pull the latest changes
git pull origin main

# Restart Passenger
mkdir -p tmp
touch tmp/restart.txt

# Check for errors
cat ~/logs/error.log | tail -30
[PM2] Applying action stopProcessId on app [all](ids: [ 0 ])
[PM2] [quarterdeck](0) ✓
┌────┬────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name           │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ quarterdeck    │ default     │ 1.0.0   │ fork    │ 0        │ 0      │ 1    │ stopped   │ 0%       │ 0b       │ u80… │ disabled │
└────┴────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
From https://github.com/O-zzi/QD-CSI
 * branch            main       -> FETCH_HEAD
Already up to date.
cat: /home/u805618386/logs/error.log: No such file or directory
[u805618386@my-kul-web2051 public_html]$ cat > server.js << 'EOF'
import { createRequire } from 'module';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const require = createRequire(import.meta.url);
const __dirname = dirname(fileURLToPath(import.meta.url));

require('dotenv').config({ path: join(__dirname, '.env') });
process.env.NODE_ENV = 'production';
require('./dist/index.cjs');
EOF
[u805618386@my-kul-web2051 public_html]$ # Check if .htaccess needs a proxy setup
nano .htaccess
[u805618386@my-kul-web2051 public_html]$
